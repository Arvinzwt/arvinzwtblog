---
title: "Shell学习笔记3：模式拓展"
date: "2024-12-04"
tag: "Shell"
description: "本教程介绍 Linux 命令行 Bash 的基本用法和脚本编程。"
---

### 简介

当你在 Shell 中输入一条命令并按下回车后，Shell 会按照以下步骤处理你的输入：

- 1、Shell 首先会根据空格把你的命令拆分成几个独立的部分（称为“词元”或“token”）。
- 2、如果某个词元里包含 \*、?、{}、~、$ 等特殊字符，Shell 会先自动替换它们（称为“扩展”）。
- 3、在所有扩展完成后，Shell 才会真正调用对应的程序（如 cp、ls、echo 等），并传递处理后的参数。

这种特殊字符的扩展，称为模式扩展（globbing），Bash 一共提供八种扩展，并严格按照顺序执行，8中拓展分别位：

- 大括号扩展
- 波浪号扩展
- 参数拓展
- 命令拓展
- 算术拓展
- 进程拓展
- 单词拆分
- 文件名拓展

从上到下处理命令行，每种扩展完成后才会进入下一步，其中需要注意的是

- 1、双引号 " " 会禁用部分扩展（如 \*、?），但允许变量和命令替换。
- 2、单引号 ' ' 会禁用所有扩展。
- 3、模式扩展：在 Bash 文档中特指`文件名扩展`（即通配符 *?[]），但广义上可能被用来泛指所有扩展。
- 4、引用删除：是 Shell 解析的最后一步（在所有扩展之后），严格来说不属于“扩展”范畴。

如：

```bash
echo "*.txt"    # 输出 *.txt（不扩展）
echo '$HOME'    # 输出 $HOME（不扩展）
echo "$var"     # 输出 $var 的值
```

Bash 允许用户打开或者关闭扩展。

```bash
# 打开
$ set +o noglob
# 或者
$ set +f

# 关闭
$ set -o noglob
# 或者
$ set -f
```

### 拓展

#### 大括号扩展
#### 波浪号扩展
#### 参数拓展
#### 命令拓展
#### 算术拓展
#### 进程拓展
#### 单词拆分
#### 文件名拓展
#### 引用删除

---

### 参考文献

[Bash 脚本教程](https://wangdoc.com/bash/)
[一篇文章让你彻底掌握 Shell](https://mp.weixin.qq.com/s/GmSqHJiBToncvcpFAJUZbw)
